---
layout: post
title: CSAPP笔记（八） 异常
categories: note
excerpt: 笔记内容只能保证我看的懂，请不要查看
tags: 计算机
---
[深入理解计算机系统](//csapp.cs.cmu.edu/){:target="csapp"}  

## 异常  

### 与过程调用的差异  
- 返回地址为当前指令，或者下一条指令。  
- 从用户程序转移到内核时，状态信息是压入内核栈中。  
- 内核模式下有完全访问权限。  

### 异常类别  
![异常]({{ site.storage }}/assets/dist/img/2017-04-07 12-58-43屏幕截图.png)  
中断： 硬件  
陷阱： 系统调用  
故障： 缺页  
终止： 硬件错误   

## 进程  
- the program’s code and data stored in **memory**,   
- its stack, the contents of its general-purpose registers,   
- its program counter,   
- environment variables,   
- the set of open file descriptors.  

### 逻辑控制流  
![异常]({{ site.storage }}/assets/dist/img/2017-04-07 13-46-43屏幕截图.png)  

### 并发流  
上图的A和B  

### 并行流  
不在同一处理器中

### 地址空间  
![异常]({{ site.storage }}/assets/dist/img/2017-04-07 14-14-49屏幕截图.png)  

### 内核模式  
位于地址空间顶部，通过CPU切换  

### 上下文切换  
每个进程都有一个上下文，其中包含寄存器、程序计数器等信息。  
当调度进程时要（在内核模式）切换上下文：   

- 保存当前的  
- 恢复新来的  
- 控制转交给新的  

### 高速缓存污染  
切换了进程或者调用了中断程序后，原进程继续运行，但高速缓存的内容可能已经发生了变化。

### 进程控制  

- [fork](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fork.html)  
- [waitpid](http://pubs.opengroup.org/onlinepubs/7908799/xsh/wait.html)  
- [execve](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html)
  argv最后一项要为空指针，执行成功不返回  

## 信号  
